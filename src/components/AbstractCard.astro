---
import type { Abstract, Author } from "@types";

import { tmpl } from "../js/templating";

import { template } from "./AbstractCardTemplate";

export interface Props {
  abstract: Abstract;
}

const { abstract } = Astro.props;

const formatAuthor = (author: Author) => {
  return `${author.forenames} ${author.surname}`;
};

const abstractCard = tmpl(template);
---

<Fragment
  set:html={abstractCard({
    url: `/abstracts/${abstract.xmlPath}`,

    meta: {
      ...abstract,
      authors: abstract.authors.map(formatAuthor).join("; "),
    },

    filters: { keywords: abstract.keywords },
  })}
/>
